
> afrodita-backend@1.0.0 test
> jest auth.service.spec

node.exe : FAIL src/modules/auth/auth.service.spec.ts
строка:1 знак:1
+ & "D:\Program Files\nodejs/node.exe" "D:\Program Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (FAIL src/module...service.spec.ts:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  AuthService
    validateEmailPassword
      тИЪ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╨╡╤А╨╜╤Г╤В╤М ╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╨╡╨╗╤П ╨┐╤А╨╕ ╨▓╨░╨╗╨╕╨┤╨╜╤Л╤Е credentials (11 ms)
      тИЪ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨╡╤Б╨╗╨╕ ╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╨╡╨╗╤М ╨╜╨╡ ╨╜╨░╨╣╨┤╨╡╨╜ (13 ms)
      тИЪ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨╡╤Б╨╗╨╕ ╨┐╨░╤А╨╛╨╗╤М ╨╜╨╡╨▓╨╡╤А╨╜╤Л╨╣ (2 ms)
      тИЪ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨╡╤Б╨╗╨╕ ╨░╨║╨║╨░╤Г╨╜╤В ╨╜╨╡╨░╨║╤В╨╕╨▓╨╡╨╜ (2 ms)
    login
      тИЪ ╨┤╨╛╨╗╨╢╨╡╨╜ ╤Б╨╛╨╖╨┤╨░╤В╤М ╤Б╨╡╤Б╤Б╨╕╤О ╨╕ ╨▓╨╡╤А╨╜╤Г╤В╤М ╤В╨╛╨║╨╡╨╜ (4 ms)
    logout
      тИЪ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨┤╨╡╨░╨║╤В╨╕╨▓╨╕╤А╨╛╨▓╨░╤В╤М ╤Б╨╡╤Б╤Б╨╕╤О (2 ms)
    validateTelegramAuth
      тИЪ ╨┤╨╛╨╗╨╢╨╡╨╜ ╤Б╨╛╨╖╨┤╨░╤В╤М ╨╜╨╛╨▓╨╛╨│╨╛ ╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╨╡╨╗╤П ╨╡╤Б╨╗╨╕ ╨╜╨╡ ╨╜╨░╨╣╨┤╨╡╨╜ (2 ms)
      ├Ч ╨┤╨╛╨╗╨╢╨╡╨╜ ╨╛╨▒╨╜╨╛╨▓╨╕╤В╤М ╤Б╤Г╤Й╨╡╤Б╤В╨▓╤Г╤О╤Й╨╡╨│╨╛ ╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╨╡╨╗╤П (1 ms)
    refreshToken
      ├Ч ╨┤╨╛╨╗╨╢╨╡╨╜ ╨╛╨▒╨╜╨╛╨▓╨╕╤В╤М ╤В╨╛╨║╨╡╨╜╤Л (1 ms)
      ├Ч ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨╡╤Б╨╗╨╕ ╤Б╨╡╤Б╤Б╨╕╤П ╨╜╨╡ ╨╜╨░╨╣╨┤╨╡╨╜╨░
      ├Ч ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨╡╤Б╨╗╨╕ ╤Б╨╡╤Б╤Б╨╕╤П ╨╕╤Б╤В╨╡╨║╨╗╨░
    validatePhone
      ├Ч ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╨╡╤А╨╜╤Г╤В╤М true ╨┤╨╗╤П ╨▓╨░╨╗╨╕╨┤╨╜╨╛╨│╨╛ ╤В╨╡╨╗╨╡╤Д╨╛╨╜╨░ (1 ms)
      ├Ч ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╨╡╤А╨╜╤Г╤В╤М false ╨┤╨╗╤П ╨╜╨╡╨▓╨░╨╗╨╕╨┤╨╜╨╛╨│╨╛ ╤В╨╡╨╗╨╡╤Д╨╛╨╜╨░ (1 ms)
    updatePhone
      ├Ч ╨┤╨╛╨╗╨╢╨╡╨╜ ╨╛╨▒╨╜╨╛╨▓╨╕╤В╤М ╤В╨╡╨╗╨╡╤Д╨╛╨╜ ╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╨╡╨╗╤П
      ├Ч ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨┤╨╗╤П ╨╜╨╡╨▓╨░╨╗╨╕╨┤╨╜╨╛╨│╨╛ ╤В╨╡╨╗╨╡╤Д╨╛╨╜╨░ (1 ms)
      ├Ч ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨╡╤Б╨╗╨╕ ╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╨╡╨╗╤М ╨╜╨╡ ╨╜╨░╨╣╨┤╨╡╨╜ (1 ms)

  тЧП AuthService тА║ validateTelegramAuth тА║ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨╛╨▒╨╜╨╛╨▓╨╕╤В╤М ╤Б╤Г╤Й╨╡╤Б╤В╨▓╤Г╤О╤Й╨╡╨│╨╛ ╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╨╡╨╗╤П

    Nest could not find AuthService element (this provider does not exist in the current context)

    [0m [90m 90 |[39m     })[33m.[39mcompile()[33m;[39m
     [90m 91 |[39m
    [31m[1m>[22m[39m[90m 92 |[39m     service [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mAuthService[39m[33m>[39m([33mAuthService[39m)[33m;[39m
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 93 |[39m     userRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mUser[39m[33m>>[39m(getRepositoryToken([33mUser[39m))[33m;[39m
     [90m 94 |[39m     sessionRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mSession[39m[33m>>[39m(getRepositoryToken([33mSession[39m))[33m;[39m
     [90m 95 |[39m     jwtService [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mJwtService[39m[33m>[39m([33mJwtService[39m)[33m;[39m[0m

      at InstanceLinksHost.get (../node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (modules/auth/auth.service.spec.ts:92:22)

  тЧП AuthService тА║ refreshToken тА║ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨╛╨▒╨╜╨╛╨▓╨╕╤В╤М ╤В╨╛╨║╨╡╨╜╤Л

    Nest could not find AuthService element (this provider does not exist in the current context)

    [0m [90m 90 |[39m     })[33m.[39mcompile()[33m;[39m
     [90m 91 |[39m
    [31m[1m>[22m[39m[90m 92 |[39m     service [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mAuthService[39m[33m>[39m([33mAuthService[39m)[33m;[39m
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 93 |[39m     userRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mUser[39m[33m>>[39m(getRepositoryToken([33mUser[39m))[33m;[39m
     [90m 94 |[39m     sessionRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mSession[39m[33m>>[39m(getRepositoryToken([33mSession[39m))[33m;[39m
     [90m 95 |[39m     jwtService [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mJwtService[39m[33m>[39m([33mJwtService[39m)[33m;[39m[0m

      at InstanceLinksHost.get (../node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (modules/auth/auth.service.spec.ts:92:22)

  тЧП AuthService тА║ refreshToken тА║ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨╡╤Б╨╗╨╕ ╤Б╨╡╤Б╤Б╨╕╤П ╨╜╨╡ ╨╜╨░╨╣╨┤╨╡╨╜╨░

    Nest could not find AuthService element (this provider does not exist in the current context)

    [0m [90m 90 |[39m     })[33m.[39mcompile()[33m;[39m
     [90m 91 |[39m
    [31m[1m>[22m[39m[90m 92 |[39m     service [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mAuthService[39m[33m>[39m([33mAuthService[39m)[33m;[39m
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 93 |[39m     userRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mUser[39m[33m>>[39m(getRepositoryToken([33mUser[39m))[33m;[39m
     [90m 94 |[39m     sessionRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mSession[39m[33m>>[39m(getRepositoryToken([33mSession[39m))[33m;[39m
     [90m 95 |[39m     jwtService [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mJwtService[39m[33m>[39m([33mJwtService[39m)[33m;[39m[0m

      at InstanceLinksHost.get (../node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (modules/auth/auth.service.spec.ts:92:22)

  тЧП AuthService тА║ refreshToken тА║ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨╡╤Б╨╗╨╕ ╤Б╨╡╤Б╤Б╨╕╤П ╨╕╤Б╤В╨╡╨║╨╗╨░

    Nest could not find AuthService element (this provider does not exist in the current context)

    [0m [90m 90 |[39m     })[33m.[39mcompile()[33m;[39m
     [90m 91 |[39m
    [31m[1m>[22m[39m[90m 92 |[39m     service [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mAuthService[39m[33m>[39m([33mAuthService[39m)[33m;[39m
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 93 |[39m     userRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mUser[39m[33m>>[39m(getRepositoryToken([33mUser[39m))[33m;[39m
     [90m 94 |[39m     sessionRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mSession[39m[33m>>[39m(getRepositoryToken([33mSession[39m))[33m;[39m
     [90m 95 |[39m     jwtService [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mJwtService[39m[33m>[39m([33mJwtService[39m)[33m;[39m[0m

      at InstanceLinksHost.get (../node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (modules/auth/auth.service.spec.ts:92:22)

  тЧП AuthService тА║ validatePhone тА║ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╨╡╤А╨╜╤Г╤В╤М true ╨┤╨╗╤П ╨▓╨░╨╗╨╕╨┤╨╜╨╛╨│╨╛ ╤В╨╡╨╗╨╡╤Д╨╛╨╜╨░

    Nest could not find AuthService element (this provider does not exist in the current context)

    [0m [90m 90 |[39m     })[33m.[39mcompile()[33m;[39m
     [90m 91 |[39m
    [31m[1m>[22m[39m[90m 92 |[39m     service [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mAuthService[39m[33m>[39m([33mAuthService[39m)[33m;[39m
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 93 |[39m     userRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mUser[39m[33m>>[39m(getRepositoryToken([33mUser[39m))[33m;[39m
     [90m 94 |[39m     sessionRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mSession[39m[33m>>[39m(getRepositoryToken([33mSession[39m))[33m;[39m
     [90m 95 |[39m     jwtService [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mJwtService[39m[33m>[39m([33mJwtService[39m)[33m;[39m[0m

      at InstanceLinksHost.get (../node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (modules/auth/auth.service.spec.ts:92:22)

  тЧП AuthService тА║ validatePhone тА║ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╨╡╤А╨╜╤Г╤В╤М false ╨┤╨╗╤П ╨╜╨╡╨▓╨░╨╗╨╕╨┤╨╜╨╛╨│╨╛ ╤В╨╡╨╗╨╡╤Д╨╛╨╜╨░

    Nest could not find AuthService element (this provider does not exist in the current context)

    [0m [90m 90 |[39m     })[33m.[39mcompile()[33m;[39m
     [90m 91 |[39m
    [31m[1m>[22m[39m[90m 92 |[39m     service [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mAuthService[39m[33m>[39m([33mAuthService[39m)[33m;[39m
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 93 |[39m     userRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mUser[39m[33m>>[39m(getRepositoryToken([33mUser[39m))[33m;[39m
     [90m 94 |[39m     sessionRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mSession[39m[33m>>[39m(getRepositoryToken([33mSession[39m))[33m;[39m
     [90m 95 |[39m     jwtService [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mJwtService[39m[33m>[39m([33mJwtService[39m)[33m;[39m[0m

      at InstanceLinksHost.get (../node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (modules/auth/auth.service.spec.ts:92:22)

  тЧП AuthService тА║ updatePhone тА║ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨╛╨▒╨╜╨╛╨▓╨╕╤В╤М ╤В╨╡╨╗╨╡╤Д╨╛╨╜ ╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╨╡╨╗╤П

    Nest could not find AuthService element (this provider does not exist in the current context)

    [0m [90m 90 |[39m     })[33m.[39mcompile()[33m;[39m
     [90m 91 |[39m
    [31m[1m>[22m[39m[90m 92 |[39m     service [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mAuthService[39m[33m>[39m([33mAuthService[39m)[33m;[39m
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 93 |[39m     userRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mUser[39m[33m>>[39m(getRepositoryToken([33mUser[39m))[33m;[39m
     [90m 94 |[39m     sessionRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mSession[39m[33m>>[39m(getRepositoryToken([33mSession[39m))[33m;[39m
     [90m 95 |[39m     jwtService [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mJwtService[39m[33m>[39m([33mJwtService[39m)[33m;[39m[0m

      at InstanceLinksHost.get (../node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (modules/auth/auth.service.spec.ts:92:22)

  тЧП AuthService тА║ updatePhone тА║ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨┤╨╗╤П ╨╜╨╡╨▓╨░╨╗╨╕╨┤╨╜╨╛╨│╨╛ ╤В╨╡╨╗╨╡╤Д╨╛╨╜╨░

    Nest could not find AuthService element (this provider does not exist in the current context)

    [0m [90m 90 |[39m     })[33m.[39mcompile()[33m;[39m
     [90m 91 |[39m
    [31m[1m>[22m[39m[90m 92 |[39m     service [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mAuthService[39m[33m>[39m([33mAuthService[39m)[33m;[39m
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 93 |[39m     userRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mUser[39m[33m>>[39m(getRepositoryToken([33mUser[39m))[33m;[39m
     [90m 94 |[39m     sessionRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mSession[39m[33m>>[39m(getRepositoryToken([33mSession[39m))[33m;[39m
     [90m 95 |[39m     jwtService [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mJwtService[39m[33m>[39m([33mJwtService[39m)[33m;[39m[0m

      at InstanceLinksHost.get (../node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (modules/auth/auth.service.spec.ts:92:22)

  тЧП AuthService тА║ updatePhone тА║ ╨┤╨╛╨╗╨╢╨╡╨╜ ╨▓╤Л╨▒╤А╨╛╤Б╨╕╤В╤М ╨╛╤И╨╕╨▒╨║╤Г ╨╡╤Б╨╗╨╕ ╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╤В╨╡╨╗╤М ╨╜╨╡ ╨╜╨░╨╣╨┤╨╡╨╜

    Nest could not find AuthService element (this provider does not exist in the current context)

    [0m [90m 90 |[39m     })[33m.[39mcompile()[33m;[39m
     [90m 91 |[39m
    [31m[1m>[22m[39m[90m 92 |[39m     service [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mAuthService[39m[33m>[39m([33mAuthService[39m)[33m;[39m
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 93 |[39m     userRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mUser[39m[33m>>[39m(getRepositoryToken([33mUser[39m))[33m;[39m
     [90m 94 |[39m     sessionRepository [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mRepository[39m[33m<[39m[33mSession[39m[33m>>[39m(getRepositoryToken([33mSession[39m))[33m;[39m
     [90m 95 |[39m     jwtService [33m=[39m module[33m.[39m[36mget[39m[33m<[39m[33mJwtService[39m[33m>[39m([33mJwtService[39m)[33m;[39m[0m

      at InstanceLinksHost.get (../node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (modules/auth/auth.service.spec.ts:92:22)

Test Suites: 1 failed, 1 total
Tests:       9 failed, 7 passed, 16 total
Snapshots:   0 total
Time:        4.032 s
Ran all test suites matching /auth.service.spec/i.
